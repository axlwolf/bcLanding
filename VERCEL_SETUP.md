# Vercel Deployment Setup Guide\n\nEsta gu√≠a te ayuda a configurar BoothieCall en Vercel con todas las variables de entorno necesarias.\n\n---\n\n## üö® Error Actual\n\nSi ves este error en el deploy:\n`\nError: supabaseUrl is required.\n`\n\nEs porque faltan las variables de entorno de Supabase en Vercel.\n\n---\n\n## ‚úÖ Soluci√≥n Paso a Paso\n\n### **Paso 1: Obtener Credenciales de Supabase**\n\n1. Ve a [app.supabase.com](https://app.supabase.com)\n2. Selecciona tu proyecto\n3. Ve a **Settings ‚Üí API**\n4. Copia estos valores:\n - **Project URL** (algo como: `https://xxxxxxxxxxxxx.supabase.co`)\n - **anon public key** (empieza con `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`)\n\n### **Paso 2: Configurar Variables en Vercel**\n\n1. Ve a [vercel.com/dashboard](https://vercel.com/dashboard)\n2. Selecciona tu proyecto BoothieCall\n3. Ve a **Settings ‚Üí Environment Variables**\n4. Agrega estas 2 variables:\n\n#### Variable 1:\n- **Name**: `NEXT_PUBLIC_SUPABASE_URL`\n- **Value**: `https://xxxxxxxxxxxxx.supabase.co` (tu Project URL)\n- **Environment**: All (Production, Preview, Development)\n\n#### Variable 2:\n- **Name**: `NEXT_PUBLIC_SUPABASE_ANON_KEY`\n- **Value**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` (tu anon key)\n- **Environment**: All (Production, Preview, Development)\n\n### **Paso 3: Configurar Base de Datos Supabase**\n\nEjecuta este SQL en tu Supabase SQL Editor:\n\n`sql\n-- Create site_config table for template switching\nCREATE TABLE IF NOT EXISTS site_config (\n  id SERIAL PRIMARY KEY,\n  key TEXT UNIQUE NOT NULL,\n  value JSONB NOT NULL,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Insert default configuration\nINSERT INTO site_config (key, value) \nVALUES (\n  'site_config',\n  '{\n    \"activeTemplate\": \"Main\",\n    \"availableTemplates\": [\n      {\n        \"id\": \"Main\",\n        \"name\": \"Default Template\",\n        \"description\": \"The default layout with standard spacing and container widths\"\n      },\n      {\n        \"id\": \"Main2\",\n        \"name\": \"Modern Template\",\n        \"description\": \"Modern layout with enhanced typography and spacing\"\n      },\n      {\n        \"id\": \"Main3\",\n        \"name\": \"Elegant Template\",\n        \"description\": \"Elegant design with premium styling\"\n      },\n      {\n        \"id\": \"Main4\",\n        \"name\": \"Bold Template\",\n        \"description\": \"Bold and vibrant layout for dynamic brands\"\n      },\n      {\n        \"id\": \"Main5\",\n        \"name\": \"Minimal Template\",\n        \"description\": \"Clean and minimal design approach\"\n      },\n      {\n        \"id\": \"Main6\",\n        \"name\": \"Luxury Template\",\n        \"description\": \"Premium luxury design with golden accents\"\n      }\n    ]\n  }'\n)\nON CONFLICT (key) DO NOTHING;\n\n-- Enable Row Level Security (optional but recommended)\nALTER TABLE site_config ENABLE ROW LEVEL SECURITY;\n\n-- Create policy to allow read access\nCREATE POLICY \"Allow read access to site_config\" ON site_config\n  FOR SELECT USING (true);\n\n-- Create policy to allow update access (you may want to restrict this)\nCREATE POLICY \"Allow update access to site_config\" ON site_config\n  FOR UPDATE USING (true);\n\n-- Create policy to allow insert access\nCREATE POLICY \"Allow insert access to site_config\" ON site_config\n  FOR INSERT WITH CHECK (true);\n`\n\n### **Paso 4: Re-deploy en Vercel**\n\n1. Una vez configuradas las variables, haz un nuevo deploy:\n - Option A: Push un nuevo commit a tu repo\n - Option B: En Vercel Dashboard ‚Üí Deployments ‚Üí Redeploy\n\n2. Verifica que el deploy sea exitoso\n\n---\n\n## üîç Verificaci√≥n\n\n### **Verificar Variables de Entorno**\n\nEn Vercel build logs, deber√≠as ver:\n`\n[SUPABASE] Initializing client with URL: https://xxxxxxxxxxxxx...\n`\n\n### **Verificar Funcionalidad**\n\n1. **Home Page**: `https://tu-proyecto.vercel.app/` debe cargar sin errores\n2. **Admin Panel**: `https://tu-proyecto.vercel.app/allset/templates` debe mostrar templates\n3. **Template Switching**: Cambiar template en admin debe funcionar inmediatamente\n\n---\n\n## üö® Troubleshooting\n\n### **Error: \"supabaseUrl is required\"**\n- ‚úÖ Verificar que `NEXT_PUBLIC_SUPABASE_URL` est√© configurada en Vercel\n- ‚úÖ Verificar que el valor sea una URL v√°lida (https://xxx.supabase.co)\n- ‚úÖ Verificar que est√© configurada para \"All environments\"\n\n### **Error: \"anon key is required\"**\n- ‚úÖ Verificar que `NEXT_PUBLIC_SUPABASE_ANON_KEY` est√© configurada\n- ‚úÖ Verificar que sea el anon key correcto (empieza con eyJhbGciOiJIUzI1NiI...)\n- ‚úÖ Verificar que est√© configurada para \"All environments\"\n\n### **Error: Template switching no funciona**\n- ‚úÖ Verificar que la tabla `site_config` exista en Supabase\n- ‚úÖ Ejecutar el SQL script de configuraci√≥n\n- ‚úÖ Verificar las pol√≠ticas RLS si las habilitaste\n\n### **Error: Build exitoso pero app no funciona**\n- ‚úÖ Verificar browser console para errores de JavaScript\n- ‚úÖ Verificar Network tab para llamadas API fallidas\n- ‚úÖ Verificar que las variables tengan prefijo `NEXT_PUBLIC_`\n\n---\n\n## üìã Checklist de Deployment\n\n### Pre-Deploy:\n- [ ] Proyecto Supabase creado y configurado\n- [ ] SQL script ejecutado en Supabase\n- [ ] Variables de entorno copiadas correctamente\n\n### Vercel Configuration:\n- [ ] `NEXT_PUBLIC_SUPABASE_URL` configurada\n- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` configurada\n- [ ] Ambas variables en \"All environments\"\n- [ ] Valores verificados (sin espacios extra, URLs completas)\n\n### Post-Deploy:\n- [ ] Build exitoso en Vercel\n- [ ] Home page carga sin errores\n- [ ] Admin panel accesible\n- [ ] Template switching funcional\n- [ ] No errores en browser console\n\n---\n\n## üîß Variables de Entorno Completas\n\nEjemplo de configuraci√≥n final en Vercel:\n\n`bash\n# Required for production\nNEXT_PUBLIC_SUPABASE_URL=https://abcdefghijk.supabase.co\nNEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODk2MjYwNDIsImV4cCI6MjAwNTIwMjA0Mn0...\n\n# Optional (usually auto-detected)\n# NODE_ENV=production\n`\n\n---\n\n**¬°Con esta configuraci√≥n, tu proyecto BoothieCall deber√≠a deployar exitosamente en Vercel!** üöÄ\n\nSi sigues teniendo problemas, revisa los logs de build de Vercel para errores espec√≠ficos.\n
